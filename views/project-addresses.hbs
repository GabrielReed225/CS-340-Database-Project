<h1>Address Table</h1>

<table>
    <thead>
        <tr>
            {{#each addresses.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th></th>
        </tr>
    </thead>

    <tbody>
        {{#each addresses}}
        <tr>
            <td>{{this.addressID}}</td>
            <td>{{this.street}}</td>
            <td>{{this.state}}</td>
            <td>{{this.city}}</td>
            <td>{{this.zipCode}}</td>

            {{! DELETE form }}
            <td>
                <form id='delete_address_form' action="/Addresses/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this address record? This cannot be undone.');">
                    <input type='hidden' name='delete_address_id' value='{{this.addressID}}' />
                    <button type='submit'>
                        Delete
                    </button>
                </form>
            </td>
        {{/each}}
    </tbody>
</table>

{{! CREATE form }}
<h2>Add an Address</h2>
<form class='cuForm' id='add_address_form' action="/Addresses/create" method="POST" >
    <label for='add_address_street'>Street: </label>
    <input type='text' name='street' id='add_address_street' required />

    <label for='add_address_state'>State: </label>
    <input type='text' name='state' id='add_address_state' required pattern='[A-Za-z]+' title='Please use only letters (no numbers or symbols)'/>

    <label for='add_address_city'>City: </label>
    <input type='text' name='city' id='add_address_city' required pattern='[A-Za-z]+' title='Please use only letters (no numbers or symbols)'/>

    <label for='add_address_zipCode'>ZipCode:</label>
    <input type='text' name='zip_code' id='add_address_zipCode' required pattern='[0-9]{5}' title='Please enter a 5-digit zip code' maxlength='5' minlength='5'/>

    <input type='submit' />
</form>

{{! UPDATE form }}
<h2>Update an Address</h2>
<form class='cuForm' id='update_address_form' action="/Addresses/update" method="POST">
    <label for='update_address_id'>Address to Update: </label>
    <select name='update_address_ID' id='update_address_id' required>
        <option value='' disabled selected>Select a Address</option>
        {{#each addresses}}
        <option value='{{this.addressID}}' required>
            {{this.street}}
            {{this.state}}
            {{this.city}}
            {{this.zipCode}}
        </option>
        {{/each}}
    </select>

    <label for='update_address_street'>New Street: </label>
    <input type='text' name='street' id='update_address_street' required />

    <label for='update_address_state'>New State: </label>
    <input type='text' name='state' id='update_address_state' required pattern='[A-Za-z]+' title='Please use only letters (no numbers or symbols)'/>
    
    <label for='update_address_city'>New City: </label>
    <input type='text' name='city' id='update_address_city' required pattern='[A-Za-z]+' title='Please use only letters (no numbers or symbols)'/>

    <label for='update_address_zipCode'>New ZipCode:</label>
    <input type='text' name='zip_code' id='update_address_zipCode' required pattern='[0-9]{5}' title='Please enter a 5-digit zip code' maxlength='5' minlength='5'/>

    <input type='submit' />
</form>